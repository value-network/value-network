(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e1ade72"],{"1d70":function(t,e,a){"use strict";var o=a("7ded"),n=a.n(o);n.a},"3b08":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mine-pool-nodes"},[a("vs-container",[a("vs-header",{staticStyle:{"margin-top":"20px"},attrs:{title:t.$t("Pool.MPRN")}}),a("vs-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"hidden-xs-only",staticStyle:{"margin-top":"10px"},attrs:{"element-loading-spinner":"el-icon-loading"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("div",{ref:"vsChart1",staticStyle:{width:"500px",height:"400px"}})]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[a("div",{staticClass:"lines"})]),a("el-col",{attrs:{span:11}},[a("div",{ref:"vsChart2",staticStyle:{width:"500px",height:"400px"}})])],1)],1),a("vs-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"hidden-sm-and-up",staticStyle:{"margin-top":"10px"},attrs:{"element-loading-spinner":"el-icon-loading"}},[a("div",{ref:"vsChart3",staticStyle:{width:"100%",height:"300px"}})]),a("vs-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"hidden-sm-and-up",staticStyle:{"margin-top":"10px"},attrs:{"element-loading-spinner":"el-icon-loading"}},[a("div",{ref:"vsChart4",staticStyle:{width:"100%",height:"300px"}})]),a("vs-main",{staticStyle:{"margin-top":"10px","margin-bottom":"46px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"font-size":"14px"},attrs:{"element-loading-spinner":"el-icon-loading",data:t.poolArray,"header-cell-style":t.rowClass}},[a("el-table-column",{attrs:{prop:"id",type:"index",index:t.indexMethod,label:"",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"shortName",label:t.$t("Pool.MPRNAbbreviation"),width:"160",align:"left"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.accountID?a("router-link",{attrs:{to:"/mine-pool-node/"+t.row.accountID}},[a("vs-poollogoname",{attrs:{logo:t.row.logo,name:t.row.shortName}})],1):a("vs-poollogoname",{attrs:{logo:t.row.logo,name:t.row.shortName,noLink:"true"}})]}}])}),a("el-table-column",{attrs:{prop:"location",label:t.$t("Pool.Location"),"show-overflow-tooltip":!0,align:"center",width:"150"}}),a("el-table-column",{attrs:{prop:"minerCount",width:"80",align:"center",label:t.$t("Pool.Miner")}}),a("el-table-column",{attrs:{prop:"usedCap",width:"80",align:"right",label:t.$t("Pool.Capacity")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("toFixed1")(e.row.usedCap))+"T")]}}])}),a("el-table-column",{attrs:{prop:"capRate",width:"110",align:"center",label:t.$t("Pool.CapacityRate")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toRate")(e.row.capRate)))])]}}])}),a("el-table-column",{attrs:{prop:"totalPledged",width:"120",align:"right",label:t.$t("Pool.StakedAmount")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toThousands")(t._f("formatVol")(e.row.totalPledged))))])]}}])}),a("el-table-column",{attrs:{prop:"pledgeRate",width:"120",align:"center",label:t.$t("Pool.StakedRate")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toRate")(e.row.pledgeRate)))])]}}])}),a("el-table-column",{attrs:{"render-header":t.renderHeader,prop:"blockNum",width:"80",align:"center","class-name":"not-long",label:t.$t("Pool.BlockForged")}}),a("el-table-column",{attrs:{"render-header":t.renderHeader,prop:"latestBlockReward",width:"90",align:"right","class-name":"not-long",label:t.$t("Pool.LatestBlockReward")+"(VAL)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toThousands")(t._f("formatVol")(e.row.latestBlockReward))))])]}}])}),a("el-table-column",{attrs:{"render-header":t.renderHeader,prop:"totalForgedBalance",align:"right","class-name":"not-long",label:t.$t("Pool.TotalBlockEarning")+"(VAL)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("toThousands")(t._f("formatVol")(e.row.totalForgedBalance))))])]}}])})],1)],1)],1)],1)},n=[],l=a("a34a"),r=a.n(l),i=a("313e"),s=a.n(i),c=a("c6e6"),d=a("c493"),u=a("365c"),p=a("d977"),f=a.n(p);function h(t,e,a,o,n,l,r){try{var i=t[l](r),s=i.value}catch(c){return void a(c)}i.done?e(s):Promise.resolve(s).then(o,n)}function g(t){return function(){var e=this,a=arguments;return new Promise(function(o,n){var l=t.apply(e,a);function r(t){h(l,o,n,r,i,"next",t)}function i(t){h(l,o,n,r,i,"throw",t)}r(void 0)})}}var m={name:"MinePoolNodes",data:function(){return{loading:!1,poolArray:[],openFullScreen:!1,totalCap:"",blockReward:0,leftTitle:{en:"MPRN's Capacity Rate","zh-cn":"矿池节点空间容量占比"},rightTitle:{en:"MPRN's Staking Rate","zh-cn":"矿池节点质押量占比"}}},created:function(){this.getLastBlock(),this.getCap(),this.poolList()},mounted:function(){},watch:{"$i18n.locale":function(){this.poolList()}},update:function(){this.drawPie1(),this.drawPie2()},methods:{getLastBlock:function(){var t=this;Object(c["a"])({requestType:"getBlockList",limit:1,page:1}).then(function(e){0===e.errCode&&e.data.data&&(t.blockReward=e.data.data[0].blockReward)})},getCap:function(){var t=this;Object(u["getBlockChainCap"])().then(function(e){t.totalCap=e.data.data})},rowClass:function(){return"font-weight: normal;font-size:14px;"},indexMethod:function(t){return 0===t?"":t++},drawPie1:function(){var t,e,a=this.$refs.vsChart1,o=this.$refs.vsChart3;a&&(t=s.a.init(a)),o&&(e=s.a.init(o));for(var n=[],l=this.poolArray.length,r=1;r<l;r++){var i=100*this.poolArray[r].capRate;i&&n.push({value:i,name:this.poolArray[r].shortName||"无名"})}var c={backgroundColor:"#ffffff",title:{text:this.leftTitle[this.$i18n.locale],x:"center",y:"0"},series:[{name:"访问来源",type:"pie",radius:["30%","60%"],center:["50%","55%"],data:n,label:{normal:{show:!0,textStyle:{color:"#666"}},emphasis:{show:!0}},labelLine:{normal:{show:!0}},itemStyle:{normal:{color:function(t){var e=["#89b4e7","#434347","#a8ea89","#e9a668","#8186e2","#dd6681","#e8da69","#539e9e","#e06560","#a7e6df"];return e[t.dataIndex%10]}}}}]};t&&t.setOption(c),e&&e.setOption(c)},drawPie2:function(){var t,e,a=this.$refs.vsChart2,o=this.$refs.vsChart4;a&&(t=s.a.init(a)),o&&(e=s.a.init(o));for(var n=[],l=this.poolArray.length,r=1;r<l;r++){var i=100*this.poolArray[r].pledgeRate;i&&n.push({value:i,name:this.poolArray[r].shortName||"无名"})}var c={backgroundColor:"#ffffff",title:{text:this.rightTitle[this.$i18n.locale],x:"center",y:"0"},series:[{name:"访问来源",type:"pie",radius:["30%","60%"],center:["50%","55%"],data:n,label:{normal:{show:!0,textStyle:{color:"#666"}},emphasis:{show:!0}},labelLine:{normal:{show:!0}},itemStyle:{normal:{color:function(t){var e=["#89b4e7","#434347","#a8ea89","#e9a668","#8186e2","#dd6681","#e8da69","#539e9e","#e06560","#a7e6df"];return e[t.dataIndex%10]}}}}]};t&&t.setOption(c),e&&e.setOption(c)},openDetails:function(t){var e="/mine-pool-node/"+t.accountID;this.$router.push({path:e})},poolList:function(){var t=g(r.a.mark(function t(){var e,a,o,n,l=this;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="http://18.162.209.48:8025/vol?requestType=getMinePoolList",this.loading=!0,a=this,t.next=5,Object(d["getTotalPledged"])();case 5:o=t.sent,n=o.totalPledged,Object(d["c"])(e+this.$i18n.locale,!0).then(function(t){if(0===t.code){for(var e=t.data.rows,o=0,r=0,i=0,s=0;s<e.length;s++)e[s].minerCount&&(o+=parseFloat(e[s].minerCount)),e[s].totalForgedBalance&&(r+=parseFloat(e[s].totalForgedBalance)),e[s].blockNum&&(i+=parseFloat(e[s].blockNum));var c={id:0,logo:f.a,shortName:"全网",location:"-",minerCount:o,usedCap:a.totalCap,capRate:"1",pledgeRate:"1",totalPledged:n,totalForgedBalance:r,blockNum:i,latestBlockReward:l.blockReward};e.unshift(c),a.poolArray=t.data.rows,l.drawPie1(),l.drawPie2()}}).finally(function(){l.loading=!1});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},v=m,w=(a("1d70"),a("2877")),b=Object(w["a"])(v,o,n,!1,null,"18fc0b27",null),y=b.exports;e["default"]=y},"7ded":function(t,e,a){},c493:function(t,e,a){"use strict";a.d(e,"c",function(){return l}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return i});var o=a("bc3a"),n=a.n(o);function l(t,e){return new Promise(function(a,o){n.a.get(t).then(function(t){t.data.data&&t.data.data.rows&&e&&s(t.data.data.rows),a(t.data)},function(t){console.log(t)}).catch(function(t){console.log(t)})})}function r(t,e){return new Promise(function(a,o){n.a.get(t).then(function(t){t.data.data&&t.data.data.rows&&e&&s(t.data.data.rows),a(t.data)},function(t){console.log(t)}).catch(function(t){console.log(t)})})}function i(){var t=localStorage.getItem("poolConfigLogo");return t}function s(t){for(var e={},a={},o=0;o<t.length;o++)t[o].accountID&&(e[t[o].accountID]=t[o].shortName,a[t[o].accountID]=t[o].logo);var n=JSON.stringify(e),l=JSON.stringify(a);localStorage.setItem("poolConfig",n),localStorage.setItem("poolConfigLogo",l)}},d977:function(t,e,a){t.exports=a.p+"img/0.ef406098.png"}}]);